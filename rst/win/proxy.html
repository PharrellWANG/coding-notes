

<!DOCTYPE html>
<html lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>2. Proxy &mdash; Coding Notes latest documentation</title>
  

  
  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  
  
  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="../../_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/css/aliwang-custom.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="1. Keymaps" href="../misc/keymaps.html" />
    <link rel="prev" title="1. Windows" href="windows.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home" alt="Documentation Home"> Coding Notes
          

          
          </a>

          
            
            
              <div class="version">
                latest
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">AI</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ai/deep-learning.html">1. Deep Learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ai/tensorflow.html">2. Tensorflow</a></li>
</ul>
<p class="caption"><span class="caption-text">Unix</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../unix/android.html">1. Android</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/docker.html">2. Docker</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/mac.html">3. Mac</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/centos.html">4. CentOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/ubuntu.html">5. Ubuntu</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/ssh.html">6. SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/zsh-shell.html">7. Zsh Shell</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/supervisor.html">8. Supervisor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/ports.html">9. Ports</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/git.html">10. Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/svn.html">11. SVN</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/anaconda.html">12. Anaconda</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/vim.html">13. Vim</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/htcondor.html">14. HTCondor</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/opencv.html">15. OpenCV</a></li>
<li class="toctree-l1"><a class="reference internal" href="../unix/input-method.html">16. Input Method</a></li>
</ul>
<p class="caption"><span class="caption-text">Video Coding</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../videocoding/ffmpeg.html">1. FFMPEG</a></li>
</ul>
<p class="caption"><span class="caption-text">Web Dev</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../webdev/frontend-node.html">1. Node</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/frontend-npm.html">2. NPM</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/frontend-react-redux.html">3. React &amp; Redux</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/backend-django.html">4. Django</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/backend-drf.html">5. Django Rest Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/backend-psql.html">6. PostgreSQL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/backend-dot.html">7. Django OAuth Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/nginx.html">8. Nginx</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/http.html">9. HTTP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/ssl.html">10. Secure Sockets Layer (SSL/TLS)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../webdev/internet.html">11. Internet</a></li>
</ul>
<p class="caption"><span class="caption-text">Write the Docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../dt/sphinx-get-started.html">1. Sphinx Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dt/sphinx-how-to.html">2. Sphinx How To</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dt/markdown.html">3. Markdown How To</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dt/gitbook.html">4. GitBook How To</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dt/mkdocs.html">5. MkDocs</a></li>
</ul>
<p class="caption"><span class="caption-text">Coding Languages</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../colan/python.html">1. Python</a></li>
<li class="toctree-l1"><a class="reference internal" href="../colan/cpp.html">2. Cpp</a></li>
</ul>
<p class="caption"><span class="caption-text">Windows</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="windows.html">1. Windows</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Proxy</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#proxy-in-cygwin">2.1. Proxy in Cygwin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#why-is-proxy-needed">2.1.1. Why is Proxy Needed</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-set-proxy">2.1.2. How to Set Proxy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#how-to-use-virtualenv-without-downloading">2.1.3. How to Use Virtualenv without Downloading</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#download-using-proxy">2.2. Download using Proxy</a></li>
<li class="toctree-l2"><a class="reference internal" href="#common-questions">2.3. Common Questions</a></li>
</ul>
</li>
</ul>
<p class="caption"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/keymaps.html">1. Keymaps</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/pgp.html">2. PGP</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/tmp_info.html">3. Temporary stuff</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/rst_example.html">4. Restructured Text (reST) and Sphinx CheatSheet</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Coding Notes</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li><span class="section-number">2. </span>Proxy</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/rst/win/proxy.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="proxy">
<h1><span class="section-number">2. </span>Proxy<a class="headerlink" href="#proxy" title="Permalink to this headline">Â¶</a></h1>
<p>To use Linux commands in Windows, one option is to use <strong>Cygwin</strong>.</p>
<div class="section" id="proxy-in-cygwin">
<h2><span class="section-number">2.1. </span>Proxy in Cygwin<a class="headerlink" href="#proxy-in-cygwin" title="Permalink to this headline">Â¶</a></h2>
<div class="section" id="why-is-proxy-needed">
<h3><span class="section-number">2.1.1. </span>Why is Proxy Needed<a class="headerlink" href="#why-is-proxy-needed" title="Permalink to this headline">Â¶</a></h3>
<p>When your PC is behind proxy, you need to configure proxy to be able to perform downloading action or git clone from github. This typically happens when your PC is within company intranet.</p>
</div>
<div class="section" id="how-to-set-proxy">
<h3><span class="section-number">2.1.2. </span>How to Set Proxy<a class="headerlink" href="#how-to-set-proxy" title="Permalink to this headline">Â¶</a></h3>
<ol class="arabic">
<li><p>set proxy in <em>~/.bashrc</em>: add below contents into <em>~/.bashrc</em>, then <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">~/.bashrc</span></code>.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">export</span> <span class="nv">HTTP_PROXY</span><span class="o">=</span>http://127.0.0.1:12639
<span class="nb">export</span> <span class="nv">HTTPS_PROXY</span><span class="o">=</span><span class="nv">$HTTP_PROXY</span>
<span class="nb">export</span> <span class="nv">FTP_PROXY</span><span class="o">=</span><span class="nv">$HTTP_PROXY</span>
<span class="nb">export</span> <span class="nv">RSYNC_PROXY</span><span class="o">=</span><span class="nv">$HTTP_PROXY</span>
<span class="nb">export</span> <span class="nv">NO_PROXY</span><span class="o">=</span><span class="s2">&quot;localhost,127.0.0.1,localaddress,.localdomain.com&quot;</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>set proxy in <strong>vscode</strong>: open <code class="docutils literal notranslate"><span class="pre">settings.json</span></code> in <strong>vscode</strong>, then add below contents into it:</p>
<blockquote>
<div><div class="highlight-json notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="nt">&quot;http.proxy&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:12639&quot;</span><span class="p">,</span>
    <span class="nt">&quot;https.proxy&quot;</span><span class="p">:</span> <span class="s2">&quot;http://127.0.0.1:12639&quot;</span><span class="p">,</span>
    <span class="nt">&quot;http.proxyStrictSSL&quot;</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>set proxy to git clone from github in pc behind a proxy:</p>
<blockquote>
<div><p>step 1: run <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">config</span> <span class="pre">--global</span> <span class="pre">http.proxy</span> <span class="pre">http://127.0.0.1:12639</span></code> to set proxy in <em>.gitconfig</em></p>
<p>step 2: in <em>~/.ssh/config</em>, add below contents to make <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">...</span></code> use port 443 in case your are blocked from port 22.</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12</pre></div></td><td class="code"><div class="highlight"><pre><span></span> Host github.com
 User git
 HostName ssh.github.com
 Port <span class="m">443</span>
 PreferredAuthentications publickey
 ProxyCommand /usr/bin/corkscrew.exe <span class="m">127</span>.0.0.1 <span class="m">12639</span> %h %p
 IdentityFile ~/.ssh/github_rsa

 <span class="c1"># you may need to change proxy url and port in line 6,</span>
 <span class="c1"># and if you change ``Host`` to be another name e.g. gitproxy,</span>
 <span class="c1"># then you may need to use ``git clone git@gitproxy:PharrellWANG/coding-notes.git`` instead of</span>
 <span class="c1"># the original ``git clone git@github.com:PharrellWANG/coding-notes.git``</span>
</pre></div>
</td></tr></table></div>
<p>step 3: <a class="reference external" href="https://help.github.com/en/github/authenticating-to-github/adding-a-new-ssh-key-to-your-github-account">how to set ssh keys for github</a></p>
<p>step 4: <a class="reference external" href="https://help.github.com/en/github/authenticating-to-github/testing-your-ssh-connection">testing ssh key for github</a></p>
</div></blockquote>
</li>
</ol>
</div>
<div class="section" id="how-to-use-virtualenv-without-downloading">
<h3><span class="section-number">2.1.3. </span>How to Use Virtualenv without Downloading<a class="headerlink" href="#how-to-use-virtualenv-without-downloading" title="Permalink to this headline">Â¶</a></h3>
<p>If you have not configured the proxy hence `` virtualenv venv -p <cite>which python3</cite> `` fails at the step of downloading pip, you can use the below trick to skip the downloading process when creating the venv:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14</pre></div></td><td class="code"><div class="highlight"><pre><span></span> <span class="c1"># If you just want to use a proxy, you can use ``HTTP_PROXY`` and ``HTTPS_PROXY`` in *~/.bashrc*</span>
 <span class="c1"># But if you want to guarantee the use of your wheels, then do this:</span>
 mkdir -p /opt/pypi/downloads
 <span class="nb">pushd</span> /opt/pypi/downloads
 pip download --no-cache --proxy http://proxy:3128 setuptools wheel pip
 <span class="nb">popd</span>
 virtualenv --no-download --extra-search-dir /opt/pypi/downloads virtualenv

 <span class="c1"># if you are using an index URL (like Nexus3), you should try a similar approach.</span>
 mkdir -p /opt/pypi/downloads
 <span class="nb">pushd</span> /opt/pypi/downloads
 pip download --no-cache --proxy http://127.0.0.1:12639 -i http://nexus3:8081/repository/pypi/simple --trusted-host nexus3 setuptools wheel pip
 <span class="nb">popd</span>
 virtualenv --no-download --extra-search-dir /opt/pypi/downloads virtualenv
</pre></div>
</td></tr></table></div>
</div></blockquote>
</div>
</div>
<div class="section" id="download-using-proxy">
<h2><span class="section-number">2.2. </span>Download using Proxy<a class="headerlink" href="#download-using-proxy" title="Permalink to this headline">Â¶</a></h2>
<p>When attempting to download files/packages in cygwin on Windows desktop provided by company, in which typically the internet is only accessible via wired network, the proxy is needed for downloading to work.</p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="c1"># warning: if you want to install pip on cygwin, please use cygwin installer. Do not use below method, currently I don&#39;t think it works fine with little effort.</span>
curl --proxy http://127.0.0.1:12639 https://bootstrap.pypa.io/get-pip.py -o get-pip.py
python get-pip.py --proxy<span class="o">=</span><span class="s2">&quot;http://127.0.0.1:12639&quot;</span>
pip3 --proxy http://127.0.0.1:12639 install virtualenv
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="common-questions">
<h2><span class="section-number">2.3. </span>Common Questions<a class="headerlink" href="#common-questions" title="Permalink to this headline">Â¶</a></h2>
<p><span class="green">1.</span> <span class="bold">When to add commands to</span> <span class="bolditalic">.bashrc</span> <span class="bold">when to</span> <span class="bolditalic">.bash_profile</span>?</p>
<blockquote>
<div><p>You choose whether a command goes in <em>.bashrc</em> vs <em>.bash_profile</em> depending on on whether you want it to run once when <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">--login</span></code> or for every interactive shell start <code class="docutils literal notranslate"><span class="pre">bash</span></code>.</p>
<p>The purpose of a <em>.bashrc</em> file is to provide a place where you can set up variables, functions and aliases, define your (PS1) prompt and define other settings that you want to use every time you open a new terminal window. It serves to define elements that are not inherited through the environment, such as aliases.</p>
<p>The purpose of a <em>.profile</em> or <em>.bash_profile</em> file is to define and export environment variables and bash functions that will be used by bash and the programs invoked by bash. It is a good place to redefine PATH if needed.</p>
<p><em>.bash_profile</em> and <em>.profile</em> which are only run at the start of a new login shell. (<code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">-l</span></code> or <code class="docutils literal notranslate"><span class="pre">bash</span> <span class="pre">--login</span></code>).</p>
<p><em>.bashrc</em> is similar to <em>.profile</em> but is executed each time an interactive bash shell is launched.</p>
<p>If you do not use login shells, you may want to put the contents of <em>.profile</em> as discussed above instead.</p>
<p>On OS X, Terminal by default runs a login shell every time.</p>
<p>ref: <a class="reference external" href="https://cygwin.com/cygwin-ug-net/setup-files.html">https://cygwin.com/cygwin-ug-net/setup-files.html</a></p>
</div></blockquote>
<p><span class="green">2.</span> <span class="bold">What does</span> <code class="docutils literal notranslate"><span class="pre">source</span></code> <span class="bold">do</span>?</p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">source</span></code> is a bash shell build-in command that executes the content of the file passed as argument, <strong>in the current shell</strong>. It has a synonym in <code class="docutils literal notranslate"><span class="pre">.</span></code> (period).</p>
<p>So <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">./g.sh</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">./g.sh</span></code></p>
<p><strong>Syntax</strong></p>
<div class="highlight-bash notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2</pre></div></td><td class="code"><div class="highlight"><pre><span></span> . filename <span class="o">[</span>args<span class="o">]</span>
 <span class="nb">source</span> filename <span class="o">[</span>args<span class="o">]</span>
</pre></div>
</td></tr></table></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Be careful, <code class="docutils literal notranslate"><span class="pre">./</span></code> and <code class="docutils literal notranslate"><span class="pre">source</span></code> are not quite the same.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">./script</span></code> runs the script as an executable file, launching <strong>a new shell</strong> to run it.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">source</span> <span class="pre">script</span></code>, which is the same as <code class="docutils literal notranslate"><span class="pre">.</span> <span class="pre">script</span></code>, <em>reads and executes commands from filename</em> in <strong>the current shell</strong> environment.</p></li>
</ul>
</div>
</div></blockquote>
<p><span class="green">3.</span> <span class="bold">Correct bash and shell script variable capitalization</span></p>
<blockquote>
<div><ul class="simple">
<li><p>If you export a environment variable, use upper case convention.</p></li>
<li><p>The main reason for using uppercase variable names was to avoid conflicts with shell commands.</p></li>
<li><p>All the text books Iâve looked at always user upper case for all shell variables. While lower case variable names are permissible, uppercase is the convention.</p></li>
</ul>
<p><a class="reference external" href="https://stackoverflow.com/questions/673055/correct-bash-and-shell-script-variable-capitalization">Ref from SO</a></p>
</div></blockquote>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="../misc/keymaps.html" class="btn btn-neutral float-right" title="1. Keymaps" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="windows.html" class="btn btn-neutral float-left" title="1. Windows" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2017-2020, WANG Zhenxiang Pharrell

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>